# Глава 10. Хитрости и хакове

В настоящата глава ще се запознаем с някои хитрости, хакове и техники за по-ефективно програмиране ...

TODO


## Форматиране на кода

Уважаеми читателю, няма да изпадам в детайли какво точно е govnokod.ru, понеже вярвам в умението ти, сам да се досетиш, най-малко заради съществената близост на руският и българският език. В настоящата глава, и по-точно в дяловете „Правилно форматиране на кода“  и „Именуване на елементите на кода“, ще дам няколко прости, но съществени съвета, как да избегнеш увековечаването в гореспоменатия сайт.
Преди да пристъпя към самите правила, нека изясним защо е необходимо кодът ни да бъде правилно форматиран( а и наименован). Казано с други думи, защо не е редно да пишем както намерим за добре, а трябва да се подчиняваме на редица правила и добри практики при изграждането на софтуер.
**Въпрос: Оказва ли влияние, правилното форматиране на кодът, върху процесът на компилация?**

Както знаем вече, езикът C# ( подобно на езиците като Java, C и C++), преминават през процес наречен компилация, който най-общо може да бъде разгледан като превод на написаната програма(в частност превод от C#) на език разбираем от процесора (асемблер). След краят на процесът на компилация на C#, се получава изпълним файл (.ехе) или такъв с разширение .dll ( Dynamic Link Librarie).Нека разгледаме следните фигури
Фигура 2. Пример за добре форматиран код
Въпросът е има ли значение за компилаторът, дали кодът е добре форматиран ?
Отговорът на този въпрос е НЕ! Освен в случаите, в които е допусната синтактична грешка( за което Visual Studio услужливо ще  намекне), всяка вариация от интервали и нови редове, ще бъде успешно компилирана.
Тогава защо ?
Ако компилаторът,а от там и самият процесор разбират всякъкъв синтактично коректен код( включително и шампионите на govnokod.ru), защо изобщо има подобен дял на главата?
Отговорът е следният. Правилното форматиране на кодът, както и правилното наименуване на променливите цели следните неща – подобряване на четимостта и улесняването на подръжката на вече написаният код. Представете си, че работите във софтуерна фирма, която има няколко офиса. Единият е в България, единият е в САЩ, третият е в Индия(държавите са напълно случайно подбрани). Представете си, че от един от офисите извън България, получите няколко стотин(или хилияди) реда код, като този на Фигура 1, с молбата да го прегледате и да намерите защо не работи правилно. Тази  задача, би отнела десетки часове и много усилия. Всички тези часове и негативни емоции, могат лесно да бъдат спестени, при спазване на следните основни правила при писането на качествен код.
Важно! Фундаменталният принцип на правилното форматиране е : Форматирането трябва ясно да показва логическата структура на кодът. 
За да постигнем този резултат и нашият код да бъде възприет като правилно форматиран трябва да се придържаме към следните правила.
Правило 1 : Използвайте къдрави скоби  { }
Пример 1 :
```cs
// swap left and right elements for whole array
for ( var i=0; i<MaxElements; i++ )
    leftElement = left[i];
    left[i] = right[i];
    right[i] = leftElement;
```
Тук няма поставени кавички, които да обозначат операциите, извършващи се в тялото на цикъла. Макар и валиден за компилаторът, този код не е правилно форматиран и създава неяснотта. В практиката е вероятно да видите подобен код. Изненадата за вас може да дойде от факта, че код като този е по-скоро присъщ за по-опитен програмист, отколкото за някой, които тепърва започва своят път в ИТ индустрията. Това, че опитен програмист си позволява да пише по-този начин, не означава, че вие трябва да го правите!


Пример 2:
```cs
// swap left and right elements for whole array
for (var i = 0; i < MaxElements; i++)
{
         leftElement = left[i];
         left[i] = right[i];
         right[i] = leftElement;

}
```
Това е правилно форматиран код, в който ясно се вижда кои операции се извършват в тялото на цикъла.
В езикът C# е прието отварящата скоба да се поставя на нов ред както в пример 2. За справка в езикът Java, е прието отварящата скоба да се поставя на същият ред, както в пример 3.
```cs
for (int i = 0; i < MaxElements; i++) {
//TODO
} 
```
Пример 3. Форматиране за езикът Java
Правило 2 : Табулация, спейсове и празни редове
Изключително важно зa правилното форматиране на кодът е правилното поставяне на табулации и спейсове. Табулацията представлява отместване в дясно равно на 4 спейса. Visual Studio прави това аетоматично при натискане на Tab бутона. Табулацията се поставя всеки път когато парче програмна логика се изпълнява в тялото на друга такава. Казано по-просто, всяка логика, която попада между кърдавите скобо { }, следва да бъде отместена на дясно с 4 празни пространства или една табулация.
Пример 2 илюстрира това правило. Следващият пример показва не правилно форматиран код : 
```cs
for (var i = 0; i <10; i++)
{
Console.WriteLine(i); // Console.WriteLine(i) изпълнява в тялото на цикълът и следва да бъде отместен с 4 празни простраства(една табулация) надясно
}
```
Правилното поставяне на спейсове(единично празно пространство) също е важно за правилното форматиране на кодът. Най-важното правило, което трябва да се спазва е, че единично празно пространство се остава всеки път, когато инициализираме променлива, или когато поставяме оператор/оператори в израз. Пример:
var = firstNumber = 5; // Правилно поставяне на спейс преди и след знакът за присвояване =
var = firstNumber=5; // Тук виждаме неправилно форматиран код(липсва празно пространство преди и сед присвояването
var sum = 10 + firstNumber; // Пример за правилно форматиран код, празно пространство преди и след всеки оператор.
int sum =10 +firstNumber; // Тук виждаме неправилно форматиран код
Изключение е когато поставяме променлива/променливи в кръгли скоби:
var total = (firstNumber)/(5); // в случай като този не се оставя празно пространсво преди или след променливата
Що се отнася до празните редове, не е прието да се оставят празни редове в кода. 



## Именуване на елементите на кода

TODO: Именуване на проекти, файлове, променливи


Правилното наименуване е същот толкова важен аспкект на добрият код.(ако не дори и по-важен). Тук целта отново е следната – подобряване на четимостта и улесняването на подръжката на вече написаният код. Но дакато проблемът с форматирането може лесно да бъде решен стига да изпозлваме добра среда за разработка (Visual Studio например), то правилно наименуване на проекти, подпроекти, променливи и т.н е изцяло отговорност на програмиста. Ако проектите ни и променливите ни, не бъдат именувани правилно може да достигнем до пародоксалната ситуация сами да не разбираме собственият си код. Естесвено това важи в пъто по-голяма сила, за външен човек, който иска да разбере, как нашият код действа. За да избегнем подобна ситуация трябва да следваме следните правила:
Използваме само английски език
Това правилно е основното и най-важното. Ако то не бъде спазено, всички по-долу изброени правила биха били безсмислени. Англиският език е международният език на ИТ, и не се допуска използването на какъвто и да е друг език, нито в имената на проектите, нито в имената на променливите. Не бихте искали да видите код, в който променливите са написани с латински букви, но значението им е на виетнамски нали ? (Примерът не е измислен а реално съществиващ в архива на govnokod.ru)
Смислени  и верни имена:
Използването на смислени имена на проекти е вторият по важност елемент на правилно наименуванят код. Генерално казано – имената трябва да са достатъчно описателни, за да могат да бъдат лесно разбрани от хора, които не са автори на даденият код. Малко примери за добре именувани променливи – studentsCount,  configFileName, totalSum.
Неправилно наименувани променливи – к1, button1, num, someNumber;
Както забелязваме променливите, които се състоят от две или повече думи, се записват по определен начин. Първата буква винаги е малка, а всяка следваща първа буква, на нова дума, е главна. Този начин на запис се нарича Camel case и е стандартeн за C# и .NET.
Разбира се, не трава да забравяме, че смисленото неименуване на всяка променлива зависи не само от комбинацията от думи, от която тя се съставя, а и от контекста в който се използва.
Същите правила важат и за наименуването на цели проекти. 
//ТОDO pics
Специално внимание, трябва да обърнем на наименуването на bool (променливи, които пазят в себе си само стойности true и false). При тях името трябва да бъде така подбрано, че само по себе си да означава въпрос, на който може да се отговори със стойностите true или false.
Пример :
```cs
// bool isNumberPrime = true;
If(isNumberPrime) 
{
	//TODO:
}
```
Други правилни наименувания на bool променливи – hasPandingPayment, isUserActive, isUnderage, ect
ВАЖНО!
Ако името на променливата стане прекалено дълго, или не можем да измислим достатъчно добро описание, винаги можем да добавим коментар над променливата и да обясним какво прави. Коментарите, се пишат винаги на Английски език.


TODO: Shortcuts in VS, примерно [Ctrl+F] [Ctrl+F], Comment code, ...


## Шаблони с код (code snippets)

TODO: Code snippets - как да си направим Code Snippet?
TODO: примерен code snippet: cri -> int i = int.Parse(Console.ReadLine());


## Техники за дебъгване на кода

TODO: Дебъгване на код - работа с [F10], [F11] и breakpoints - накратко!


## Справочник с хитрости

TODO: Cheat sheet: така се прави цикъл, така се прави проверка, така се форматира с 2 десетични цифри, ...


## Какво научихме от тази глава?

В настоящата глава се запознахме с някои хитрости, хакове, техники и инструменти за по-ефективно писане на код, решаване на задачи и откриване и отстраняване на грешки в кода. Ако не сте ги пробвали, поиграйте си с тях, защото те помагат на програмистите да бъдат ефективни и да пишат по-качествен софтуер.
